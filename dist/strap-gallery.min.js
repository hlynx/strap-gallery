/*!
 * StrapGallery v0.0.4
 * https://github.com/hlynx/strap-gallery.git
 * Copyright 2014 hlynx <hlynx@users.noreply.github.com>
 */
!function(){function a(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"/src/template.html",link:function(a,d){function e(){if(!h){i=d.find("img"),a.imagesCount=i.length;for(var b=0;b<a.imagesCount;b++)i[b].dataset.id=b;h=!0}}function f(b){var c=i[b].dataset.source,d=document.getElementById("strap-gallery-img");console.log(d),a.title="Фотографии: ",a.src=c,a.currentId=b}function g(b){return j.$isShown?void(37===b.keyCode?a.$apply(function(){a.prev()}):39===b.keyCode?a.$apply(function(){a.next()}):27===b.keyCode&&a.$apply(function(){j.hide()})):!1}var h=!1,i=[];a.currentId=0;var j=b({scope:a,template:"/src/modal.html",show:!1,animation:"am-fade-and-scale",placement:"center"});c.on("keypress",g),a.$on("$destroy",function(){c.off("keypress",g)}),a.next=function(){f(a.currentId===a.imagesCount-1?0:a.currentId+1)},a.prev=function(){f(0===a.currentId?a.imagesCount-1:a.currentId-1)},a.onClick=function(a){if(h||(e(),h=!0),"IMG"===a.target.tagName){var b=parseInt(a.target.dataset.id);j.$promise.then(function(){j.show(),f(b)})}}}}}angular.module("strapGallery",["mgcrea.ngStrap.modal","ngAnimate"]).directive("strapGallery",["$log","$modal","$document",a])}(),angular.module("strapGallery").run(["$templateCache",function(a){"use strict";a.put("/src/modal.html",'<div class="modal strap-gallery-modal" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header" ng-show="title">\n                <button type="button" class="close" ng-click="$hide()">&times;</button>\n                <h4 class="modal-title" ng-bind="title"></h4>\n            </div>\n\n            <div class="modal-body">\n                <div class="strap-gallery-img-outer">\n                    <div class="arrow next" ng-click="next()"><span class="glyphicon glyphicon-chevron-right"></span></div>\n                    <div class="arrow prev" ng-click="prev()"><span class="glyphicon glyphicon-chevron-left"></span></div>\n                    <img class="strap-gallery-img" id="strap-gallery-img" ng-src="{{ src }}">\n                </div>\n            </div>\n            <div class="modal-footer">\n                {{ currentId + 1 }} из {{ imagesCount }}\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("/src/template.html",'<div class="strap-gallery" ng-click="onClick($event)">\n    <div ng-transclude></div>\n</div>')}]);