/*!
 * StrapGallery v0.0.2
 * https://github.com/hlynx/strap-gallery.git
 * Copyright 2014 hlynx <hlynx@users.noreply.github.com>
 */
!function(){function a(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"/src/template.html",link:function(a,d){function e(b){if(!i){j=b.find("img"),a.count=j.length;for(var c=0;c<a.count;c++)j[c].dataset.id=c;i=!0}}function f(a){if("IMG"===a.target.tagName){var b=parseInt(a.target.dataset.id);g(b),k.$promise.then(k.show)}}function g(b){var c=j[b].dataset.source;a.title="Фотографии: ",a.src=c,a.currentId=b}function h(b){return k.$isShown?void(37===b.keyCode?a.$apply(function(){a.prev()}):39===b.keyCode?a.$apply(function(){a.next()}):27===b.keyCode&&a.$apply(function(){k.hide()})):!1}var i=!1,j=[];a.currentId=0;var k=b({scope:a,template:"/src/modal.html",show:!1,animation:"am-fade-and-scale",placement:"center"});d[0].addEventListener("click",function(a){i||(e(d),i=!0),f(a)}),c.on("keypress",h),a.$on("$destroy",function(){for(var b=0;b<a.count;b++)j[b].removeEventListener("click",f);c.off("keypress",h)}),a.next=function(){g(a.currentId===a.count-1?0:a.currentId+1)},a.prev=function(){g(0===a.currentId?a.count-1:a.currentId-1)}}}}angular.module("strapGallery",["mgcrea.ngStrap.modal","ngAnimate"]).directive("strapGallery",["$log","$modal","$document",a])}(),angular.module("strapGallery").run(["$templateCache",function(a){"use strict";a.put("/src/modal.html",'<div class="modal strap-gallery-modal" tabindex="-1" role="dialog">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header" ng-show="title">\n                <button type="button" class="close" ng-click="$hide()">&times;</button>\n                <h4 class="modal-title" ng-bind="title"></h4>\n            </div>\n\n            <div class="modal-body">\n                <div class="strap-gallery-img-outer">\n                    <div class="arrow next" ng-click="next()"><span class="glyphicon glyphicon-chevron-right"></span></div>\n                    <div class="arrow prev" ng-click="prev()"><span class="glyphicon glyphicon-chevron-left"></span></div>\n                    <img class="strap-gallery-img" ng-src="{{src}}">\n                </div>\n            </div>\n            <div class="modal-footer">\n                {{ currentId + 1 }} из {{ count }}\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("/src/template.html",'<div class="strap-gallery">\n    <div ng-transclude></div>\n</div>')}]);